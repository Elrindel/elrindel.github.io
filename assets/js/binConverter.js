let $=a=>document.querySelector(a),$$=a=>document.querySelectorAll(a),B=BigInt,currentBits=32,inputFilter=(a,b,c=!0)=>(b=("1"==a.dataset.signed&&"-"==(b??a.value)[0]?"-":"")+(b??a.value).replaceAll(new RegExp(a.dataset.filter,"g"),""),c?a.value=b:b),inputMaxLength=a=>{if(a.value.length){inputFilter(a);let b=a.maxLength-("1"==a.dataset.signed&&"-"!=a.value[0]?1:0);a.value.length>b&&(a.value=a.value.substr(0,b))}},inputChange=b=>{let a=inputFilter(b,void 0,!1);a.length&&"-"==a[0]?setValues(a.length>1?B((b.dataset.bigintprefix??"")+a.replace("-",""))-1n&2n**B(currentBits-1)-1n^2n**B(currentBits)-1n:"-"):setValues(a.length?B((b.dataset.bigintprefix??"")+a):"")},setValues=a=>{"bigint"==typeof a?$$("input.input").forEach(b=>{"1"==b.dataset.signed&&a>>B(currentBits-1)==1n?inputFilter(b,"-"+((a^2n**B(currentBits)-1n)+1n).toString(b.dataset.base)):inputFilter(b,a.toString(b.dataset.base))}):$$("input.input").forEach(b=>b.value="-"==a&&"1"==b.dataset.signed?"-":"")},setBits=a=>{let b=(1n<<B(a))-1n;currentBits=parseInt(a),$("form").style.setProperty("--input-size",a),$$("input.input[maxlength]").forEach(a=>{let c=b.toString(a.dataset.base).length+("1"==a.dataset.signed?1:0);a.maxLength=c,a.parentNode.style.setProperty("--input-bg-hide",Math.max(0,currentBits-c)),inputMaxLength(a)}),inputChange($("input#base2"))},setSigned=a=>{$$("input.input[data-signed]").forEach(b=>{b.parentNode.classList[a?"add":"remove"]("signed"),b.dataset.signed=a?1:0}),setBits(currentBits),inputChange($("input#base2"))},syncScroll=a=>{$$(".input-scroll").forEach(b=>{b.scroll(a.target.scrollLeft,a.target.scrollTop)})};$$(".input-scroll").forEach(a=>{a.addEventListener("scroll",syncScroll),a.addEventListener("wheel",b=>{b.preventDefault(),a.scrollLeft+=b.deltaY})}),$$("input.input").forEach(a=>{a.addEventListener("input",a=>inputMaxLength(a.target)),a.addEventListener("keyup",a=>inputChange(a.target))}),$$('input[name="bits"]').forEach(a=>{a.addEventListener("change",b=>{let a=parseInt(b.target.value);isNaN(a)?$("input#bits-custom").style.display="inline-block":($("input#bits-custom").style.display="none",$("input#bits-custom").value=a,setBits(a))})}),$("input#bits-custom").addEventListener("change",a=>setBits(a.target.value)),$("input#signed").addEventListener("change",a=>setSigned(a.target.checked)),setBits(currentBits)